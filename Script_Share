-- // ReGui Base
local ReGui = loadstring(game:HttpGet('https://raw.githubusercontent.com/depthso/Dear-ReGui/refs/heads/main/ReGui.lua'))()
local PrefabsId = `rbxassetid://{ReGui.PrefabsId}`

ReGui:Init({
    Prefabs = game:GetService("InsertService"):LoadLocalAsset(PrefabsId)
})

-- // Global Variables
_G.BlurAmount = 15
_G.BlurEffect = Instance.new("BlurEffect", game.Lighting)
_G.BlurEffect.Size = _G.BlurAmount

_G.SunFlare = Instance.new("SunRaysEffect", game.Lighting)
_G.SunFlare.Intensity = 0.059
_G.SunFlare.Spread = 0.356

_G.ColorCorrection = Instance.new("ColorCorrectionEffect", game.Lighting)
_G.ColorCorrection.TintColor = Color3.new(1, 1, 1) -- Default putih

-- // Fungsi Shader dari CloudyV2
local function applyShader(mode)
    local Lighting = game:GetService("Lighting")

    -- Reset efek sebelum mengaktifkan shader baru
    Lighting:ClearAllChildren()

    -- Efek shader dari CloudyV2
    if mode == "Normal" then
        Lighting.Brightness = 1.2
        Lighting.OutdoorAmbient = Color3.fromRGB(139, 139, 139)
        Lighting.Ambient = Color3.fromRGB(2, 2, 2)
        _G.ColorCorrection.TintColor = Color3.new(1, 1, 1)
    elseif mode == "Pink" then
        Lighting.Brightness = 1.5
        Lighting.OutdoorAmbient = Color3.fromRGB(255, 198, 250)
        Lighting.Ambient = Color3.fromRGB(255, 198, 250)
        _G.ColorCorrection.TintColor = Color3.new(1, 0.5, 0.8) -- Pink
    end

    -- Tambahkan efek
    local SunFlare = Instance.new("SunRaysEffect", Lighting)
    SunFlare.Intensity = _G.SunFlare.Intensity
    SunFlare.Spread = _G.SunFlare.Spread

    local Blur = Instance.new("BlurEffect", Lighting)
    Blur.Size = _G.BlurAmount

    local Sky = Instance.new("Sky", Lighting)
    if mode == "Normal" then
        Sky.SkyboxBk = "rbxassetid://150335574"
        Sky.SkyboxDn = "rbxassetid://150335585"
        Sky.SkyboxFt = "rbxassetid://150335628"
        Sky.SkyboxLf = "rbxassetid://150335620"
        Sky.SkyboxRt = "rbxassetid://150335610"
        Sky.SkyboxUp = "rbxassetid://150335642"
    elseif mode == "Pink" then
        Sky.SkyboxBk = "rbxassetid://271042516"
        Sky.SkyboxDn = "rbxassetid://271077243"
        Sky.SkyboxFt = "rbxassetid://271042556"
        Sky.SkyboxLf = "rbxassetid://271042310"
        Sky.SkyboxRt = "rbxassetid://271042467"
        Sky.SkyboxUp = "rbxassetid://271077958"
    end
end

-- // Motion Blur Script
local function motionBlurScript()
    local Camera = game.Workspace.CurrentCamera
    local Last = Camera.CFrame.lookVector

    game:GetService("RunService").Heartbeat:Connect(function()
        if not _G.BlurEffect or _G.BlurEffect.Parent == nil then
            _G.BlurEffect = Instance.new("BlurEffect", game.Lighting)
        end
        
        local magnitude = (Camera.CFrame.lookVector - Last).magnitude
        _G.BlurEffect.Size = math.abs(magnitude) * _G.BlurAmount
        Last = Camera.CFrame.lookVector
    end)
end

-- Jalankan Motion Blur Script
motionBlurScript()

-- // Window GUI
local Window = ReGui:Window({
    Title = "LunaRay",
    Size = UDim2.fromOffset(300, 150)
})

Window:Label({Text="Shader"})

-- Tombol Normal
Window:Button({
    Text = "Normal",
    Callback = function()
        applyShader("Normal")
    end,
})

-- Tombol Pink
Window:Button({
    Text = "Pink",
    Callback = function()
        applyShader("Pink")
    end,
})

Window:Label({Text="Shader Config"})

Window:SliderInt({
    Label = "Motion Blur",
    Value = _G.BlurAmount,
    Minimum = 1,
    Maximum = 20,
    Callback = function(value)
        _G.BlurAmount = value
        if _G.BlurEffect then
            _G.BlurEffect.Size = value
        end
    end
})

Window:SliderFloat({
    Label = "SunRays [Intensity]",
    Value = _G.SunFlare.Intensity,
    Minimum = 0,
    Maximum = 1,
    Callback = function(value)
        if _G.SunFlare then
            _G.SunFlare.Intensity = value
        end
    end
})

Window:SliderFloat({
    Label = "SunRays [Spread]",
    Value = _G.SunFlare.Spread,
    Minimum = 0,
    Maximum = 1,
    Callback = function(value)
        if _G.SunFlare then
            _G.SunFlare.Spread = value
        end
    end
})
